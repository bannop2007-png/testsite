<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî Vistora</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="header">... (—Å–∫–æ–ø–∏—Ä—É–π header –∏–∑ index.html) ...</header>
<aside class="sidebar">... (—Å–∫–æ–ø–∏—Ä—É–π sidebar) ...</aside>

<main class="main-content" style="margin-left:260px; padding:100px 40px;">
    <div style="max-width:1000px; margin:auto; background:#111; border-radius:24px; padding:40px;">
        <h1 style="font-size:42px; color:#ffd700;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
        
        <div class="tabs">
            <button onclick="showTab(0)" class="tab-btn active">üë§ –ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</button>
            <button onclick="showTab(1)" class="tab-btn" id="adminTab" style="display:none;">üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
        </div>

        <div id="tab0">
            <div id="userInfo" style="font-size:18px; margin:30px 0;"></div>
        </div>

        <div id="tab1" style="display:none;">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
            <table id="usersTable" style="width:100%; border-collapse:collapse;"></table>
            
            <h2 style="margin-top:40px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ</h2>
            <button onclick="addNewVideo()" style="background:#ff0055; padding:12px 24px; border:none; border-radius:30px; color:white; margin-bottom:15px;">
                + –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ
            </button>
            <table id="videosTable" style="width:100%; border-collapse:collapse;"></table>
        </div>
    </div>
</main>

<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    updateHeader();
    const user = getCurrentUser();
    if (!user) return location.href = 'login.html';

    document.getElementById('userInfo').innerHTML = `
        <p><strong>–ò–º—è:</strong> ${user.username}</p>
        <p><strong>Email:</strong> ${user.email}</p>
    `;

    if (isAdmin()) {
        document.getElementById('adminTab').style.display = 'inline-block';
        showTab(1); // —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É
    }
});

function showTab(n) {
    document.getElementById('tab0').style.display = n===0 ? 'block' : 'none';
    document.getElementById('tab1').style.display = n===1 ? 'block' : 'none';
    
    if (n===1) {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
        let html = `<tr style="background:#222"><th>ID</th><th>–ò–º—è</th><th>Email</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>`;
        users.forEach(u => {
            html += `<tr><td>${u.id}</td><td>${u.username}</td><td>${u.email}</td>
            <td><button onclick="deleteUser(${u.id})" style="background:#ff0055;color:white;border:none;padding:6px 12px;border-radius:20px;">–£–¥–∞–ª–∏—Ç—å</button></td></tr>`;
        });
        document.getElementById('usersTable').innerHTML = html;

        // –í–∏–¥–µ–æ
        let vhtml = `<tr style="background:#222"><th>ID</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–ö–∞–Ω–∞–ª</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>`;
        videos.forEach(v => {
            vhtml += `<tr><td>${v.id}</td><td>${v.title}</td><td>${v.channel}</td>
            <td><button onclick="deleteVideo(${v.id})" style="background:#ff0055;color:white;border:none;padding:6px 12px;border-radius:20px;">–£–¥–∞–ª–∏—Ç—å</button></td></tr>`;
        });
        document.getElementById('videosTable').innerHTML = vhtml;
    }
}
</script>
</body>
</html>
